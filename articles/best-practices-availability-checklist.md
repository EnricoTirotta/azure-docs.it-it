<properties
   pageTitle="Elenco di controllo della disponibilità | Microsoft Azure"
   description="Elenco di controllo in cui vengono fornite le linee guida per i problemi di disponibilità durante la progettazione."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="12/15/2015"
   ms.author="masashin"/>

# Elenco di controllo della disponibilità

![](media/best-practices-availability-checklist/pnp-logo.png)

## Progettazione di applicazioni

- **Evitare i singoli punti di errore.** Tutti i componenti, i servizi, le risorse e le istanze di calcolo devono essere distribuiti come istanze multiple, per impedire che un singolo punto di errore influisca sulla disponibilità. Sono inclusi i meccanismi di autenticazione. Progettare l'applicazione in modo che possa essere configurata per utilizzare più istanze e per rilevare gli errori e reindirizzare le richieste a istanze senza errori, nei casi in cui la piattaforma non esegue questa operazione automaticamente.
- **Decomporre il carico di lavoro per il contratto di servizio diverso.** Se un servizio è composto da un carico di lavoro critico e uno meno critico, gestirli in modo diverso e specificare le funzionalità del servizio e il numero di istanze per soddisfare i rispettivi requisiti di disponibilità.
- **Ridurre al minimo e comprendere le dipendenze del servizio.** Ridurre al minimo il numero dei servizi diversi utilizzati laddove possibile e assicurarsi di comprendere tutte le dipendenze di funzionalità e servizi presenti nel sistema. Ciò include la natura di tali dipendenze e l'impatto dell’errore o del peggioramento delle prestazioni in ciascuna di esse sull’applicazione globale. Microsoft garantisce una disponibilità di almeno il 99,9% per la maggior parte dei servizi, ma ciò significa che ogni servizio aggiuntivo su cui si basa un’applicazione riduce il contratto di servizio per la disponibilità complessiva del sistema dello 0,1%.
- **Progettare attività e messaggi in modo che siano idempotenti, laddove possibile,** per far sì che le richieste duplicate non causino problemi. Ad esempio, un servizio può fungere da consumer che gestisce i messaggi inviati come richieste da altre parti del sistema che agiscono da produttori. Se si verifica un errore del consumer dopo l'elaborazione del messaggio, ma prima del riconoscimento che il messaggio è stato elaborato, un produttore potrebbe inviare una richiesta di ripetizione che può essere gestita da un'altra istanza del consumer. Per questo motivo, i consumer e le operazioni da essi effettuate devono essere idempotenti, affinché la ripetizione di un'operazione eseguita in precedenza non invalidi il risultato. Ciò potrebbe significare rilevamento di messaggi duplicati, oppure la garanzia di coerenza tramite un approccio ottimistico alla gestione dei conflitti.
- **Utilizzare un gestore dei messaggi che implementa l’elevata disponibilità per le transazioni critiche.** Molti scenari per l’avvio di attività o l'accesso ai servizi remoti utilizzano la messaggistica per passare le istruzioni tra l'applicazione e il servizio di destinazione. Per prestazioni ottimali, l'applicazione deve essere in grado di inviare il messaggio e quindi tornare a elaborare ulteriori richieste senza dover attendere una risposta. Per garantire il recapito dei messaggi, il sistema di messaggistica deve garantire un'elevata disponibilità. Le code di messaggi del bus di servizio implementano _almeno una volta_ la semantica, per cui ogni messaggio inviato a una coda non andrà perso, sebbene in alcune circostanze è possibile che vengano recapitate copie duplicate. Se l'elaborazione dei messaggi è idempotente (vedere la voce precedente), il recapito ripetuto non dovrebbe essere un problema.
- **Progettare le applicazioni in modo che le prestazioni si riducano in modo non drastico** quando raggiungono i limiti delle risorse e intraprendere l'azione appropriata per ridurre al minimo l'impatto dell'utente. In alcuni casi, il carico sull’applicazione può superare la capacità di una o più parti, causando una ridotta disponibilità e problemi ed errori di connessione. La scalabilità consente di ovviare a questo problema, ma può raggiungere un limite imposto da fattori quali la disponibilità delle risorse o costi. Progettare l'applicazione in modo che, in questa situazione sia in grado di ridurre automaticamente e non drasticamente le prestazioni. Ad esempio, in un sistema di e-commerce, se il sottosistema di elaborazione degli ordini è sotto pressione (o se è completamente in errore), tale parte del sistema può essere disabilitata temporaneamente, consentendo ad altre funzionalità (come l'esplorazione del catalogo prodotti) di continuare. Potrebbe essere opportuno posticipare le richieste a un sottosistema in errore, ad esempio consentendo comunque agli utenti di inviare ordini ma salvandoli in una coda o in un altro meccanismo di archiviazione sicura per l'elaborazione successiva quando il sottosistema di ordini è nuovamente disponibile.
- **Gestire correttamente gli eventi burst rapidi.** La maggior parte delle applicazioni deve gestire diversi carichi di lavoro nel tempo, ad esempio i picchi innanzitutto al mattino in un'applicazione aziendale o quando viene rilasciato un nuovo prodotto in un sito di e-commerce. La scalabilità automatica consente di gestire il carico, ma potrebbe richiedere tempo per portare online istanze aggiuntive e gestire le richieste. Evitare che picchi di attività improvvisi e inattesi causino il sovraccarico dell'applicazione progettando quest’ultima in modo che accodi le richieste ai servizi che utilizza e riduca le prestazioni non drasticamente quando le code sono vicine alla capacità completa. Assicurarsi che le prestazioni e la capacità disponibili siano sufficienti in condizioni di non burst a svuotare le code e gestire le richieste in sospeso. Per ulteriori informazioni, vedere il [modello di livellamento dei carichi basato sulle code](https://msdn.microsoft.com/library/dn589783.aspx).

## Distribuzione e manutenzione

- **Distribuire più istanze dei ruoli per ogni servizio.** Microsoft garantisce la disponibilità per i servizi creati e distribuiti dall’utente, ma tale garanzia è valida solo se si distribuiscono almeno due istanze di ciascun ruolo nel servizio. In tal modo, mentre un ruolo non è disponibile, l'altro rimane attivo. Ciò è particolarmente importante se è necessario distribuire gli aggiornamenti a un sistema in tempo reale, senza interrompere le attività dei client. Le istanze possono essere rese inattive e aggiornate singolarmente, mentre le altre continuano a essere online.
- **Eseguire l’host delle applicazioni in più data center.** Sebbene sia estremamente improbabile, è possibile che un intero data center sia offline a causa di un evento, ad esempio una calamità naturale o un guasto Internet a livello di trunk. Le applicazioni aziendali fondamentali devono essere ospitate in più data center per garantire la massima disponibilità. Ciò offre un ulteriore vantaggio in quanto può ridurre la latenza per gli utenti locali e offre ulteriori opportunità per una maggiore flessibilità durante l'aggiornamento delle applicazioni.
- **Automatizzare ed eseguire il test delle attività di distribuzione e manutenzione.** Le applicazioni distribuite sono costituite da più parti che devono interagire tra loro. Pertanto la distribuzione deve essere automatizzata tramite meccanismi testati e comprovati come script e applicazioni di distribuzione che consentono di aggiornare e convalidare la configurazione e di automatizzare il processo di distribuzione. È necessario inoltre utilizzare tecniche automatizzate per eseguire aggiornamenti di tutte le applicazioni o di parte di esse. È fondamentale eseguire il test completo di tutti questi processi per garantire che gli errori non causino tempi di inattività aggiuntivi. Tutti gli strumenti di distribuzione devono disporre di limitazioni della sicurezza appropriati per proteggere l'applicazione distribuita. Definire e applicare i criteri di distribuzione con attenzione e ridurre al minimo la necessità dell’intervento umano.
- **Prendere in considerazione l’utilizzo di funzionalità di gestione temporanea e produzione della piattaforma**, se disponibili. Ad esempio, l'utilizzo di ambienti di gestione temporanea e produzione di Servizi Cloud di Azure consente alle applicazioni di passare da uno all’altro tramite uno scambio di indirizzo IP virtuale (scambio VIP). Tuttavia, se si preferisce la gestione temporanea locale o la distribuzione contemporanea di versioni diverse dell'applicazione, migrando gli utenti gradualmente, si potrebbe non essere in grado di eseguire un'operazione di scambio VIP.
- **Applicare modifiche di configurazione senza riciclare** l'istanza quando possibile. In molti casi, le impostazioni di configurazione per un’applicazione o un servizio Azure possono essere modificate senza che sia necessario riavviare il ruolo. Il ruolo espone eventi che possono essere gestiti per rilevare le modifiche alla configurazione e applicarle ai componenti all’interno dell'applicazione. Tuttavia, alcune modifiche alle impostazioni di piattaforma di base richiederanno il riavvio di un ruolo. Durante la creazione di componenti e servizi, ottimizzare la disponibilità e ridurre al minimo il tempo di inattività, progettandoli in modo da accettare le modifiche alle impostazioni di configurazione senza dover riavviare completamente l'applicazione.
- **Utilizzare i domini di aggiornamento per ridurre a zero il tempo di inattività durante gli aggiornamenti.** Per aggiornare i domini vengono allocate le unità di calcolo di Azure quali i ruoli Web e di lavoro. Aggiornare le istanze del ruolo gruppo di domini in modo che, quando si verifica un aggiornamento in sequenza, ogni ruolo nel dominio di aggiornamento venga arrestato, aggiornato e riavviato a sua volta per ridurre al minimo l'impatto sulla disponibilità dell'applicazione. È possibile specificare il numero domini di aggiornamento che è necessario creare per un servizio quando il servizio viene distribuito.

	> [AZURE.NOTE]I ruoli inoltre vengono distribuiti anche tra domini di errore, ognuno dei quali è ragionevolmente indipendente da altri domini di errore in termini di rack di server, alimentazione e raffreddamento, al fine di ridurre al minimo le probabilità di un errore che influisca su tutte le istanze del ruolo. Questa distribuzione viene eseguita automaticamente e non è possibile controllarla.

- **Configurare set di disponibilità per le macchine virtuali di Azure.** Collocando due o più macchine virtuali nello stesso set di disponibilità si garantisce che queste macchine virtuali non verranno distribuite nello stesso dominio di errore. Per ottimizzare la disponibilità, è necessario creare più istanze di ciascuna macchina virtuale critica utilizzata del sistema e inserire tali istanze nello stesso set di disponibilità. Se si eseguono più macchine virtuali utilizzate per scopi diversi, creare un set di disponibilità per ogni macchina virtuale e aggiungere le istanze di ogni macchina virtuale a ciascun set di disponibilità. Ad esempio, se sono state create macchine virtuali separate che funzionino come server Web e un server di report, creare un set di disponibilità per il server Web e un altro set di disponibilità per il server di report. Aggiungere le istanze della macchina virtuale del server Web al set di disponibilità del server Web e aggiungere istanze della macchina virtuale server di report al set di disponibilità del server di report.

## Gestione dei dati

- **Sfruttare i vantaggi della replica dei dati** attraverso la ridondanza locale e geografica. I dati nell'archiviazione di Azure vengono replicati automaticamente per la protezione contro la perdita in caso di errore dell’infrastruttura, e alcuni fattori di questa replica possono essere configurati. È possibile, ad esempio replicare le copie di sola lettura dei dati in più aree geografiche (a cui si fa riferimento come archiviazione ridondante con accesso in lettura a livello globale o RA-GRS). Si noti che l’utilizzo di RA-GRS comporta costi aggiuntivi. Per informazioni dettagliate, vedere la pagina [Prezzi di archiviazione di Azure](http://azure.microsoft.com/pricing/details/storage/) sul sito Web Microsoft.
- **Utilizzare la concorrenza ottimistica e la coerenza finale** laddove possibile. Le transazioni che bloccano l'accesso alle risorse tramite il blocco (concorrenza pessimistica) possono influire negativamente sulle prestazioni e ridurre notevolmente la disponibilità. Questi problemi possono diventare particolarmente gravi nei sistemi distribuiti. In molti casi, un'attenta progettazione e tecniche come il partizionamento possono ridurre al minimo il rischio del verificarsi di conflitti tra gli aggiornamenti. Se i dati vengono replicati o vengono letti da un archivio aggiornato separatamente, saranno coerenti solo alla fine, ma i vantaggi in genere superano di gran lunga l'impatto sulla disponibilità di utilizzo delle transazioni per garantire la coerenza immediata.
- **Utilizzare il backup periodico e il ripristino temporizzato**, e assicurarsi che soddisfi l'Obiettivo punto di ripristino. Eseguire il backup automatico regolare dei dati non viene mantenuti in un'altra posizione e verificare che sia possibile ripristinare i dati e l'applicazione stessa in modo affidabile nel caso in cui si verifichi un errore. La replica dei dati non è una funzionalità di backup, in quanto gli errori e le incoerenze introdotte tramite operazioni dannose, errori o guasti, vengono replicati tra gli archivi. Il processo di backup deve essere sicuro, per proteggere i dati in transito e nel servizio di archiviazione. I database o le parti di un archivio dati possono essere generalmente recuperati a un punto precedente nel tempo utilizzando i log delle transazioni. Microsoft Azure fornisce una funzionalità di backup per i dati archiviati nel Database SQL di Microsoft Azure. I dati vengono esportati in un pacchetto di backup nell'archiviazione blob di Microsoft Azure e possono essere scaricati in un percorso protetto in locale per l'archiviazione.
- **Abilitare l'opzione di disponibilità elevata per mantenere una copia secondaria di una cache Redis.** Quando si utilizza Cache Redis, scegliere l'opzione Standard per mantenere una copia secondaria del contenuto. Per ulteriori informazioni, vedere la pagina [Creare una cache in Cache Redis di Azure](https://msdn.microsoft.com/library/dn690516.aspx) del sito Web Microsoft.

## Errori e operazioni non riuscite

- **Introdurre il concetto di timeout.** Servizi e risorse possono diventare non disponibili, causando la mancata riuscita delle richieste. Assicurarsi che i timeout applicati siano appropriati per ogni servizio o risorsa nonché per il client che vi accede (in alcuni casi, potrebbe essere opportuno consentire un timeout più lungo per una particolare istanza di un client, a seconda del contesto e di altre azioni eseguite attualmente dal client). Timeout molto brevi possono causare un numero eccessivo di ripetizione di operazioni per i servizi e le risorse che hanno una latenza molto elevata. Tuttavia, timeout molto lunghi possono causare il blocco se nella coda di attesa della risposta per un servizio o una risorsa è presente un numero elevato di richieste.
- **Riprovare a eseguire operazioni non riuscite causate da errori temporanei.** Progettare una strategia di tentativi per l'accesso a tutti i servizi e risorse se non supportano i tentativi di connessione automatica. Utilizzare una strategia che includa l’aumento del ritardo tra i tentativi in proporzione all’aumento del numero di errori per impedire il sovraccarico della risorsa e consentire il ripristino e la gestione normali delle richieste in coda. Tentativi continui con ritardi molto brevi possono aggravare il problema.
- **Smettere di inviare richieste per evitare errori a catena** quando i servizi remoti non sono disponibili. In alcune situazioni, errori temporanei o altri errori, dalla perdita parziale di connettività al guasto completo di un servizio, richiedono tempi più lunghi del previsto per tornare alla normalità. Inoltre, se un servizio è molto occupato, un errore in una parte del sistema può causare errori a catena e comportare il blocco di molte operazioni e allo stesso tempo l’utilizzo di risorse di sistema critiche, ad esempio memoria, thread e connessioni di database. Anziché riprovare continuamente a eseguire un'operazione che è improbabile venga eseguita correttamente, l'applicazione deve accettare rapidamente che l'operazione non riesce e gestire correttamente l'errore. È possibile utilizzare il modello a interruttore per rifiutare le richieste di operazioni specifiche per periodi definiti. Nella pagina del [modello di interruttore](https://msdn.microsoft.com/library/dn589784.aspx) del sito Web Microsoft sono disponibili ulteriori dettagli.
- **Comporre o eseguire il fallback di più componenti** per ridurre l'impatto di un servizio specifico offline o non disponibile. Progettare applicazioni per sfruttare più istanze senza influire negativamente sul funzionamento e sulle connessioni esistenti, se possibile. Per ottimizzare la disponibilità, usare più istanze e distribuire le richieste tra di esse, rilevare ed evitare l'invio di richieste a istanze non riuscite.
- **Eseguire il fallback a un altro servizio o un flusso di lavoro**, se possibile. Ad esempio, se si verifica un errore di scrittura nel database SQL, archiviare temporaneamente i dati nell'archiviazione blob e fornire una struttura per riprodurre le operazioni di scrittura nell'archiviazione blob al database SQL quando diventa disponibile il servizio. In alcuni casi, un'operazione non riuscita può avere un'azione alternativa che consente all'applicazione di continuare a funzionare persino in caso di errore di un componente o di un servizio. Se possibile, rilevare gli errori e reindirizzare le richieste ad altri servizi in grado di offrire una funzionalità alternativa adatta, o per eseguire il backup o ridurre le istanze di funzionalità in grado di gestire operazioni di base mentre il servizio primario è offline.

## Monitoraggio e ripristino di emergenza

- **Fornire strumenti avanzati per probabili errori ed eventi di errore** per segnalare la situazione al personale addetto alle operazioni. Per gli errori che sono probabili ma che non si sono ancora verificati, fornire i dati sufficienti per consentire al personale addetto alle operazioni di determinare la causa, ridurre la situazione e garantire che il sistema rimanga disponibile. Per gli errori che si sono già verificati, l'applicazione deve restituire all’utente un messaggio di errore appropriato, ma tentare di continuare l'esecuzione, sebbene con funzionalità ridotte. In tutti i casi, il sistema di monitoraggio deve acquisire i dettagli completi per consentire al personale addetto alle operazioni di effettuare un ripristino rapido e, se necessario per progettisti e sviluppatori, di modificare il sistema per impedire che si verifichi nuovamente la situazione.
- **Monitorare l'integrità di sistema mediante l'implementazione di funzioni di controllo.** L'integrità e prestazioni di un'applicazione possono peggiorare nel tempo senza diventare evidenti, fino a quando non si verificano degli errori. Un modo per impedire il problema consiste nell'implementazione di funzioni di probe o di controllo che vengono eseguite regolarmente dall'esterno dell'applicazione. Questi controlli possono essere semplici come la misurazione del tempo di risposta per l'intera applicazione, per le singole parti dell'applicazione, per i singoli servizi utilizzati dall'applicazione o per i singoli componenti. Le funzioni di controllo possono eseguire processi per garantire la produzione di risultati validi, misurare la latenza, controllare la disponibilità ed estrarre informazioni dal sistema.
- **Effettuare regolarmente test di tutti i sistemi di failover e fallback** per garantire che siano disponibili e che funzionino nel modo previsto. Le modifiche ai sistemi e alle operazioni possono influire sulle funzioni di fallback e failover, ma l'impatto potrebbe non essere rilevato fino a quando si verifica un errore nel sistema principale o finché questo non è in overload. È buona norma eseguire il test del sistema prima che divenga necessario per risolvere un problema in tempo reale in fase di esecuzione.
- **Eseguire il test dei sistemi di monitoraggio.** I sistemi automatizzati di failover e fallback e la visualizzazione manuale dell'integrità e delle prestazioni del sistema tramite i dashboard dipendono tutti dal funzionamento corretto del monitoraggio e della strumentazione. In caso di errore di questi elementi, in assenza di informazioni importanti o in caso di segnalazione di dati non precisi, un operatore potrebbe non rendersi conto che il sistema è danneggiato o guasto.
- **Tenere traccia dell’avanzamento dei flussi di lavoro con esecuzione prolungata** e riprovare in caso di errore. I flussi di lavoro con esecuzione prolungata sono spesso costituiti da più passaggi. Durante la progettazione di questi tipi di flussi di lavoro è necessario assicurarsi che ogni passaggio sia indipendente e possa essere ripetuto per ridurre al minimo le probabilità della necessità di un rollback dell'intero flusso di lavoro o dell’esecuzione di più transazioni di compensazione. Monitorare e gestire lo stato di avanzamento dei flussi di lavoro a esecuzione prolungata implementando un modello come il supervisore dell’agente di pianificazione . Per ulteriori informazioni, vedere la pagina [del modello di supervisore dell’agente di pianificazione](https://msdn.microsoft.com/library/dn589780.aspx) del sito Web Microsoft.
- **Pianificare il ripristino di emergenza** Verificare che sia disponibile un piano documentato, concordato e completamente testato per il ripristino da qualsiasi tipo di errore che potrebbe rendere indisponibile una parte del sistema principale o tutto. Eseguire regolarmente il test delle procedure e assicurarsi che tutto il personale addetto alle operazioni abbia familiarità con il processo.

<!---HONumber=AcomDC_1223_2015-->